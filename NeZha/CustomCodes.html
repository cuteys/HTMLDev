<!-- ！！！仅支持 ServerStatus 主题！！！注释由 AI 编写，仅供参考！！！ -->
<!-- 更新时间：2024-11-02 02:31:21 -->
<!-- 原作者：@AriesJon   原贴：https://www.nodeseek.com/post-165736-1 -->
<!-- 在此感谢原作者 -->
<!-- 个性化设置：(1)探针Logo  (2)全局背景  (3)全局字体  (4)光标特效   (5)设备的购买、到期时间、价格、官网地址 -->
<!-- 二改作者(俩小白)：(1）@CuteysKing   (1)@musicclub1563 -->
<!-- 效果预览(全是免费🐔哈哈哈)：https://nezha.996977.xyz/ -->
<!-- 二改说明：增加半成品模糊效果，全局字体，光标特效，按钮特效；优化若干细节，修复若干 Bug -->
<!-- 已知错误：下拉框无模糊效果，原因为".navbar"类与".navbar .dropdown-menu"类冲突，本人能力不足暂时无法修改 -->
<!-- 如果有精简或者修复的建议，欢迎联系与贡献！ -->

<script>
  // 更改首页logo，在""中填入你的Logo URL
  window.addEventListener("DOMContentLoaded", (event) => {
    var logo = document.querySelector(".navbar-brand img");
    if (logo) {
      logo.src =
        ""; // 将此处的 URL 替换为你的Logo URL
    }
  });
  //server-status 主题开启半透明模式
  localStorage.setItem("semiTransparent", true);
</script>

<!-- 导入字体 -->
<link
  rel="stylesheet"
  href="https://registry.npmmirror.com/lxgw-wenkai-screen-web/1.330.1/files/style.css"
/>

<style>
  /* 设置全局背景图片 */
  body[theme="dark"]::before {
    /*自定义深色模式背景图*/
    background-image: url(https://api.miaomc.cn/image/get);
  }

  body[theme="light"]::before {
    /*自定义浅色模式背景图*/
    background-image: url(https://api.miaomc.cn/image/get);
  }

  /* 全局字体样式修改 */
  body,
  #post-content,
  .code-toolbar {
    font-family:
      "LXGW WenKai Screen",
      PingFang SC,
      Hiragino Sans GB,
      Droid Sans Fallback,
      Microsoft YaHei,
      sans-serif !important;
    font-weight: 500; /* 字体粗细 */
  }

  /* 针对宽度小于 1499px 的设备进行样式调整 */
  @media (max-width: 1499px) {
    .countdown .time {
      display: none !important;
    }
    .countdown .days {
      text-align: center !important;
      width: 100% !important;
    }
  }

  /* 针对超大屏幕（宽度 >= 1200px）调整容器宽度 */
  @media (min-width: 1200px) {
    .ui.container {
      width: 90% !important;
    }
  }

  /* 针对平板设备（宽度在 768px 到 1199px 之间）适配 */
  @media (min-width: 768px) and (max-width: 1199px) {
    .ui.container {
      width: 95% !important;
    }
    body {
      background-position: top center !important;
    }
    .countdown {
      font-size: 0.9em !important;
    }
  }

  /* 针对宽度小于 768px 的设备进行样式调整 */
  @media (max-width: 767px) {
    .ui.container {
      width: 100% !important;
      padding: 0 15px !important;
    }
    body {
      background-position: center center !important;
      background-size: cover !important;
    }
    .countdown .time {
      display: inline !important;
    }
    .countdown .days {
      text-align: left !important;
      width: auto !important;
    }
    .countdown {
      font-size: 1em !important;
    }
    .navbar-brand {
      font-size: 1.3em !important;
      white-space: nowrap;
    }
  }
  .node-cell {
    white-space: nowrap;
  }

  /* 进度条样式 */
  .ui.progress {
    border-radius: 50rem !important;
  }
  .ui.progress .bar {
    min-width: 1.8em !important;
    border-radius: 15px !important;
    line-height: 1.65em !important;
    color: black;
  }
  .ui.progress > .bar {
    background-color: #000 !important;
  }

  /* 价格标签通用的样式 */
  .ui.renewal-label {
    min-height: 20px;
    padding: 0 0.5em;
    line-height: 20px;
    height: 20px;
    font-size: 0.8em !important;
    font-weight: normal;
  }

  /* 续费按钮的样式 */
  .ui.green.button,
  .ui.green.buttons .button {
    min-height: 20px;
    padding: 0 5px;
    line-height: 20px;
    background-color: #21ba45;
    color: #ffffff;
    font-size: 1em !important;
    font-family: inherit !important;
    font-weight: normal;
  }
  /* 续费按钮的悬停效果 */
  .ui.green.button:hover,
  .ui.green.buttons .button:hover {
    background-color: #16ab39;
    box-shadow: rgba(22, 171, 57, 0.5) 0 0.5em 1em;
    transition: all 0.1s ease;
  }

  /* 网络页面字体 */
  .container .chartbox {
    font-family: inherit !important;
  }

  /* ！！！！！！！浅色模式！！！！！！！ */

  /* 浅色模式的全局样式设置 */
  body[theme="light"] {
    margin: 0;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    background: rgba(255, 255, 255, 0.25);
    color: #333;
    position: relative;
    overflow-x: hidden;
  }

  /* 浅色模式的导航栏、内容区域和下拉菜单的样式 */
  body[theme="light"] .navbar,
  body[theme="light"] .content,
  body[theme="light"] .dropdown-menu,
  body[theme="light"] #dropdown-search {
    background-color: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(2px);
    box-shadow: rgba(0, 0, 0, 0.4) 0 2px 5px;
    border: none;
    border-radius: 5px;
  }
  body[theme="light"] .navbar .dropdown-menu {
    background-color: rgba(255, 255, 255, 0.5);
    box-shadow: rgba(0, 0, 0, 0.5) 0 2px 5px;
  }
  body[theme="light"] .navbar-nav > li > a,
  body[theme="light"] .navbar .dropdown-menu li a,
  body[theme="light"] .dropdown-menu li a {
    border-radius: 5px;
    color: #000;
    transition: all 0.1s ease;
  }
  /* 浅色模式的按钮悬停效果 */
  body[theme="light"] .navbar-nav > li > a:hover,
  body[theme="light"] .navbar .dropdown-menu li a:hover,
  body[theme="light"] .dropdown-menu li a:hover {
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: rgba(255, 255, 255, 0.35) 0 1em 3em;
    color: rgb(73, 146, 255) !important;
    transition: all 0.1s ease;
  }
  /* 浅色模式的选中项图标样式 */
  body[theme="light"] .dropdown-menu li .check.icon {
    margin-left: auto;
    color: rgb(0, 123, 255) !important;
  }

  /* 浅色模式的金额标签和进度条的样式 */
  body[theme="light"] .ui.renewal-label,
  body[theme="light"] .plan.bandwidth,
  body[theme="light"] .plan.traffic,
  body[theme="light"] .plan.ipv4,
  body[theme="light"] .plan.ipv6 {
    background-image: none;
    background-color: transparent;
    border: 1px solid rgba(0, 0, 0, 0.2);
  }
  body[theme="light"] .progress {
    background-image: none;
    background-color: rgba(0, 0, 0, 0.06);
  }

  /* 浅色模式的工具箱按钮样式及其悬停效果 */
  body[theme="light"] .toolbox span {
    backdrop-filter: blur(2px);
    border-radius: 5px;
    transition: all 0.1s ease;
  }
  body[theme="light"] .toolbox span i {
    background-color: rgba(255, 255, 255, 0.25);
    color: rgba(10, 10, 10, 0.8);
    font-size: 24px;
  }
  body[theme="light"] .toolbox span:hover {
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: rgba(255, 255, 255, 0.35) 0 1em 3em;
  }
  body[theme="light"] .toolbox span:hover i {
    color: rgb(73, 146, 255);
    transition: all 0.1s ease;
  }

  /* 浅色模式的版权样式 */
  body[theme="light"] footer.container-fluid {
    color: #000;
  }
  body[theme="light"] footer.container-fluid a {
    color: #000;
    transition: color 0.1s ease;
  }
  body[theme="light"] footer.container-fluid a:hover {
    color: rgb(73, 146, 255);
    transition: all 0.1s ease;
  }

  /* ！！！！！！！深色模式！！！！！！！ */

  /* 深色模式的全局样式设置 */
  body[theme="dark"] {
    margin: 0;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    background: rgba(0, 0, 0, 0.4);
    color: #ffffff;
    position: relative;
    overflow-x: hidden;
  }

  /* 深色模式的导航栏、内容区域和下拉菜单的样式 */
  body[theme="dark"] .navbar,
  body[theme="dark"] .content,
  body[theme="dark"] .dropdown-menu,
  body[theme="dark"] #dropdown-search {
    background-color: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(2px);
    box-shadow: rgba(0, 0, 0, 0.4) 0 2px 5px;
    border: none;
    border-radius: 5px;
  }
  body[theme="dark"] .navbar .dropdown-menu {
    background-color: rgba(0, 0, 0, 0.5);
    box-shadow: rgba(255, 255, 255, 0.5) 0 2px 5px;
  }
  body[theme="dark"] .navbar-nav > li > a,
  body[theme="dark"] .navbar .dropdown-menu li a,
  body[theme="dark"] .dropdown-menu li a {
    border-radius: 5px;
    color: #fff;
    transition: all 0.1s ease;
  }

  /* 深色模式的按钮悬停效果 */
  body[theme="dark"] .navbar-nav > li > a:hover,
  body[theme="dark"] .navbar .dropdown-menu li a:hover,
  body[theme="dark"] .dropdown-menu li a:hover {
    background-color: rgba(0, 0, 0, 0.2) !important;
    box-shadow: rgba(0, 0, 0, 0.35) 0 1em 3em;
    color: rgb(73, 146, 255) !important;
    transition: all 0.1s ease;
  }
  /* 深色模式的选中项图标样式 */
  body[theme="dark"] .dropdown-menu li .check.icon {
    margin-left: auto;
    color: rgb(0, 123, 255) !important;
  }
  /* 深色模式的金额标签和进度条样式 */
  body[theme="dark"] .ui.renewal-label,
  body[theme="dark"] .plan.bandwidth,
  body[theme="dark"] .plan.traffic,
  body[theme="dark"] .plan.ipv4,
  body[theme="dark"] .plan.ipv6 {
    background-image: none;
    background-color: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.8);
  }
  body[theme="dark"] .progress {
    background-image: none;
    background-color: rgba(0, 0, 0, 0.06);
  }

  /* 深色模式的工具箱按钮样式及其悬停效果 */
  body[theme="dark"] .toolbox span {
    backdrop-filter: blur(2px);
    border-radius: 5px;
    transition: all 0.1s ease;
  }

  body[theme="dark"] .toolbox span i {
    background-color: rgba(28, 29, 38, 0.4);
    color: rgba(255, 255, 255, 0.9);
    font-size: 24px;
  }

  body[theme="dark"] .toolbox span:hover {
    background-color: rgba(28, 29, 38, 0.5);
    box-shadow: rgba(0, 0, 0, 0.5) 0 1em 3em;
  }

  body[theme="dark"] .toolbox span:hover i {
    color: rgba(73, 146, 255, 1);
    transition: all 0.1s ease;
  }

  /* 深色模式的版权样式 */
  body[theme="dark"] footer.container-fluid {
    color: rgb(255, 255, 255);
  }

  body[theme="dark"] footer.container-fluid a {
    color: rgb(255, 255, 255);
    transition: color 0.1s ease;
  }

  body[theme="dark"] footer.container-fluid a:hover {
    color: rgb(73, 146, 255);
    transition: all 0.1s ease;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    try {
      var downtimeCells = document.querySelectorAll("th.node-cell.os.center");
      if (!downtimeCells) throw new Error("找不到系统列");

      downtimeCells.forEach(function (cell) {
        var newTh = document.createElement("th");
        newTh.className = "node-cell downtime center";
        newTh.textContent = "到期倒计时";
        newTh.style.minWidth = "120px";
        cell.parentNode.insertBefore(newTh, cell.nextSibling);

        var renewalTh = document.createElement("th");
        renewalTh.className = "node-cell renewal center";
        renewalTh.textContent = "金额/周期/续费";
        renewalTh.style.minWidth = "120px";
        cell.parentNode.insertBefore(renewalTh, newTh.nextSibling);
      });

      const affLinks = {
        1: {
          startDate: new Date("2023-03-04T00:00:00+08:00"),
          endDate: new Date("2025-09-04T00:00:00+08:00"),
          amount: "// 这里写入你的价格 CNY / Annually",
          link: "// 这里写入你的链接",
        }, // 前面写入你的到期时间，格式不要修改
        2: {
          startDate: new Date("2023-03-04T00:00:00+08:00"),
          endDate: new Date("2025-09-04T00:00:00+08:00"),
          amount: "//这里写入你的价格 CNY / Annually",
          link: "//这里写入你的链接",
        }, // 前面写入你的到期时间，格式不要修改
      };

      const createCountdown = (startDate, endDate) => {
        const $countdown = document.createElement("div");
        $countdown.className = "countdown";
        $countdown.style.position = "relative";
        $countdown.style.width = "100%";
        $countdown.style.height = "20px";
        $countdown.style.backgroundColor = "#3e3e3e";
        $countdown.style.borderRadius = "4px";
        $countdown.style.overflow = "hidden";

        const $progress = document.createElement("div");
        $progress.className = "progress";
        $progress.style.position = "absolute";
        $progress.style.height = "100%";
        $progress.style.width = "0%";
        $progress.style.backgroundImage =
          "linear-gradient(to right, #48dbfb, #feca57, #ff6b6b)";
        $progress.style.transition = "width 0.6s ease";
        $progress.style.borderRadius = "4px 0 0 4px";

        const $countdownTime = document.createElement("div");
        $countdownTime.style.position = "absolute";
        $countdownTime.style.width = "100%";
        $countdownTime.style.height = "100%";
        $countdownTime.style.display = "flex";
        $countdownTime.style.alignItems = "center";
        $countdownTime.style.justifyContent = "space-between";
        $countdownTime.style.color = "#fff";
        $countdownTime.style.fontWeight = "normal";
        $countdownTime.style.fontSize = "0.9em";
        $countdownTime.style.textShadow = "1px 1px 2px rgba(0,0,0,0.7)";
        $countdownTime.style.padding = "0 7.5px";

        const updateCountdown = () => {
          const now = new Date();
          const totalDuration = endDate.getTime() - startDate.getTime();
          const remainingDuration = endDate.getTime() - now.getTime();

          if (remainingDuration <= 0) {
            $countdownTime.innerHTML = "<span>已过期</span>";
            $progress.style.width = "100%";
            $progress.style.backgroundColor = "#ff0000";
            $progress.style.backgroundImage = "none";
            return;
          }

          const days = Math.floor(remainingDuration / (1000 * 60 * 60 * 24));
          const hours = Math.floor(
            (remainingDuration % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60),
          );
          const minutes = Math.floor(
            (remainingDuration % (1000 * 60 * 60)) / (1000 * 60),
          );
          const seconds = Math.floor((remainingDuration % (1000 * 60)) / 1000);

          const remainingPercent = (remainingDuration / totalDuration) * 100;

          if (days > 0) {
            $countdownTime.innerHTML = `
              <span class="days">${days} Day</span>
              <span class="time">
                  <span class="hours">${hours.toString().padStart(2, "0")}:</span>
                  <span class="minutes">${minutes.toString().padStart(2, "0")}:</span>
                  <span class="seconds">${seconds.toString().padStart(2, "0")}</span>
              </span>
          `;
          } else {
            $countdownTime.innerHTML = `
              <span class="time">
                  <span class="hours">${hours.toString().padStart(2, "0")}:</span>
                  <span class="minutes">${minutes.toString().padStart(2, "0")}:</span>
                  <span class="seconds">${seconds.toString().padStart(2, "0")}</span>
              </span>
          `;
          }

          $progress.style.width = `${remainingPercent}%`;
        };

        updateCountdown();
        setInterval(updateCountdown, 1000);

        $countdown.appendChild($progress);
        $countdown.appendChild($countdownTime);

        return $countdown;
      };

      const rows = document.querySelectorAll("tr");
      rows.forEach((row) => {
        let osCell = row.querySelector("td.node-cell.os.center");
        if (!osCell) return;

        let downtimeCell = document.createElement("td");
        downtimeCell.classList.add("node-cell", "downtime", "center");
        downtimeCell.style.minWidth = "120px";

        let renewalCell = document.createElement("td");
        renewalCell.classList.add("node-cell", "renewal", "center");
        renewalCell.style.minWidth = "120px";

        let nodeId = row.id ? row.id.substring(1) : null;
        if (!nodeId || !affLinks[nodeId]) {
          downtimeCell.textContent = "无信息";
          renewalCell.textContent = "无信息";
          osCell.parentNode.insertBefore(downtimeCell, osCell.nextSibling);
          osCell.parentNode.insertBefore(renewalCell, downtimeCell.nextSibling);
          return;
        }

        let affLink = affLinks[nodeId];
        if (affLink.startDate && affLink.endDate) {
          let countdown = createCountdown(affLink.startDate, affLink.endDate);
          downtimeCell.appendChild(countdown);
        } else {
          downtimeCell.textContent = "无到期信息";
        }

        let amountText = affLink.amount
          ? affLink.amount.replace(/[\$€¥]/g, "")
          : "无信息";
        let link = affLink.link || "#";

        renewalCell.className = "node-cell buy";
        renewalCell.style.textAlign = "center";

        const updateCellContent = () => {
          const labelClass = "label-style";

          renewalCell.innerHTML = `
          <div class="ui basic label mini renewal-label ${labelClass}">
              ${amountText}
          </div>
          <a class="ui icon button mini green renewal-button" href="${link}" target="_blank">续费</a>
      `;
        };

        updateCellContent();

        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (
              mutation.type === "attributes" &&
              mutation.attributeName === "theme"
            ) {
              updateCellContent();
            }
          });
        });

        observer.observe(document.body, { attributes: true });

        window
          .matchMedia("(prefers-color-scheme: dark)")
          .addListener(updateCellContent);

        osCell.parentNode.insertBefore(downtimeCell, osCell.nextSibling);
        osCell.parentNode.insertBefore(renewalCell, downtimeCell.nextSibling);
      });
    } catch (error) {
      console.error("发生错误:", error.message);
    }
  });
</script>

<!-- 网页点击爱心特效 - (可删除)-->
<script type="text/javascript">
  !(function (e, t, a) {
    function r() {
      for (var e = 0; e < s.length; e++)
        s[e].alpha <= 0
          ? (t.body.removeChild(s[e].el), s.splice(e, 1))
          : (s[e].y--,
            (s[e].scale += 0.004),
            (s[e].alpha -= 0.013),
            (s[e].el.style.cssText =
              "left:" +
              s[e].x +
              "px;top:" +
              s[e].y +
              "px;opacity:" +
              s[e].alpha +
              ";transform:scale(" +
              s[e].scale +
              "," +
              s[e].scale +
              ") rotate(45deg);background:" +
              s[e].color +
              ";z-index:99999"));
      requestAnimationFrame(r);
    }
    function n() {
      var t = "function" == typeof e.onclick && e.onclick;
      e.onclick = function (e) {
        t && t(), o(e);
      };
    }

    function o(e) {
      var a = t.createElement("div");
      (a.className = "heart"),
        s.push({
          el: a,
          x: e.clientX - 5,
          y: e.clientY - 5,
          scale: 1,
          alpha: 1,
          color: c(),
        }),
        t.body.appendChild(a);
    }

    function i(e) {
      var a = t.createElement("style");
      a.type = "text/css";
      try {
        a.appendChild(t.createTextNode(e));
      } catch (t) {
        a.styleSheet.cssText = e;
      }
      t.getElementsByTagName("head")[0].appendChild(a);
    }

    function c() {
      return (
        "rgb(" +
        ~~(255 * Math.random()) +
        "," +
        ~~(255 * Math.random()) +
        "," +
        ~~(255 * Math.random()) +
        ")"
      );
    }
    var s = [];
    (e.requestAnimationFrame =
      e.requestAnimationFrame ||
      e.webkitRequestAnimationFrame ||
      e.mozRequestAnimationFrame ||
      e.oRequestAnimationFrame ||
      e.msRequestAnimationFrame ||
      function (e) {
        setTimeout(e, 1e3 / 60);
      }),
      i(
        ".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}",
      ),
      n(),
      r();
  })(window, document);
</script>